classDiagram

class Workspace {
  +str owner
  +EphemerisSource default_ephemeris
  +str active_model
  +List~ChartPreset~ chart_presets
  +List~ChartSubject~ subjects
  +List~ChartInstance~ charts
  +List~ViewLayout~ layouts
  +List~Annotation~ annotations
  +ModelOverrides model_overrides
  +AstroModel astro_model
}

class ChartPreset {
  +str name
  +ChartConfig config
}

class EphemerisSource {
  +str name
  +str backend
}

class ChartSubject {
  +str id
  +str name
  +datetime event_time
  +Location location
}

class ChartConfig {
  +ChartMode mode
  +HouseSystem house_system
  +ZodiacType zodiac_type
  +List~str~ included_points
  +Dict~str,float~ aspect_orbs
  +str display_style
  +str color_theme
  +str override_ephemeris
  +str model
  +EngineType engine
  +Ayanamsa ayanamsa
}

class ChartInstance {
  +str id
  +ChartSubject subject
  +ChartConfig config
  +Horoscope computed_chart
}

class Horoscope {
  +datetime for_time
  +Location location
  +List~CelestialBody~ bodies
  +List~House~ houses
  +List~Aspect~ aspects
}

class CelestialBody {
  +str id
  +str definition_id
  +float degree
  +str sign
  +bool retrograde
  +float speed
}

class House {
  +int number
  +float cusp_degree
  +str sign
}

class Aspect {
  +str type
  +str source_id
  +str target_id
  +float angle
  +float orb
}

class AstroModel {
  +str name
  +List~BodyDefinition~ body_definitions
  +List~AspectDefinition~ aspect_definitions
  +List~Sign~ signs
  +ModelSettings settings
  +EngineType engine
  +ZodiacType zodiac_type
  +Ayanamsa ayanamsa
}

class BodyDefinition {
  +str id
  +str glyph
  +str formula
  +str element
  +float avg_speed
  +float max_orb
  +Dict~str,str~ i18n
}

class AspectDefinition {
  +str id
  +str glyph
  +float angle
  +float default_orb
  +Dict~str,str~ i18n
}

class Sign {
  +str name
  +str glyph
  +str abbreviation
  +str element
  +Dict~str,str~ i18n
}

class ModelSettings {
  +HouseSystem default_house_system
  +List~str~ default_aspects
  +List~str~ default_bodies
  +float standard_orb
}

class ModelOverrides {
  +List~OverrideEntry~ points
  +List~OverrideEntry~ aspects
  +Dict~str,float~ override_orbs
}

class OverrideEntry {
  +str id
  +str glyph
  +float angle
  +float default_orb
  +List~str~ only_for
  +Dict~str,str~ i18n
  +bool computed
}

class ViewLayout {
  +str name
  +LayoutStyle layout_style
  +List~str~ chart_instances
  +List~ChartRelation~ relations
  +List~ViewModule~ modules
}

class ChartRelation {
  +RelationType type
  +str source
  +str target
  +str method
  +DateRange time_span
}

class ViewModule {
  +ViewModuleType type
  +Dict config
}

class Annotation {
  +str title
  +str content
  +datetime created
  +str author
}

class Attachment {
  +str filename
  +str url
  +str type
}

class Location {
  +str name
  +float latitude
  +float longitude
  +str timezone
}

class DateRange {
  +datetime start
  +datetime end
}

Workspace --> ChartPreset
Workspace --> ChartSubject
Workspace --> ChartInstance
Workspace --> ViewLayout
Workspace --> Annotation
Workspace --> ModelOverrides
Workspace --> AstroModel
Workspace --> EphemerisSource

ChartInstance --> ChartSubject
ChartInstance --> ChartConfig
ChartInstance --> Horoscope

Horoscope --> CelestialBody
Horoscope --> House
Horoscope --> Aspect

AstroModel --> BodyDefinition
AstroModel --> AspectDefinition
AstroModel --> Sign
AstroModel --> ModelSettings

ViewLayout --> ChartRelation
ViewLayout --> ViewModule
ChartRelation --> DateRange
ChartSubject --> Location
ChartConfig --> ChartMode
ChartConfig --> HouseSystem
ChartConfig --> ZodiacType
ChartConfig --> EngineType
ChartConfig --> Ayanamsa
